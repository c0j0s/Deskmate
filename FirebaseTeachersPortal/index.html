<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Teachers portal</title>
	<link rel="stylesheet" type = "text/css" href="css/bootstrap-grid.css">
	<link rel="stylesheet" type = "text/css" href="css/bootstrap-reboot.css">
	<link rel="stylesheet" type = "text/css" href="css/bootstrap.css">
	
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.js"></script>
	

	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script


  </head>
  <body>
	<div class="container">
		<h2 class="display-2">
			Welcome, Teachers
		</h2>
	
	<div id="data">
		
	</div>
	</div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        
        //The Firebase SDK is initialized and available here!
		 var config = {
			apiKey: "AIzaSyB29exuhOXpePNSnW4UaGd8dhSppgYbYTo",
			authDomain: "deskmate2018.firebaseapp.com",
			databaseURL: "https://deskmate2018.firebaseio.com",
			projectId: "deskmate2018",
			storageBucket: "deskmate2018.appspot.com",
			messagingSenderId: "876434687063"
		};
			firebase.initializeApp(config);
        var studentProfileDb = firebase.database().ref('profile');
		studentProfileDb.on('value', getData)
		function getData(data){
			data.forEach(function(childSnapshot){
				var userkey = childSnapshot.key;
					$('<div class= "card" ><div class="card-body" id="'+userkey+'"><h3 class = "display-4"><b>'+childSnapshot.val().name+'</b></h3></div></div><p></p>').appendTo("#data");
						childSnapshot.val().homework.forEach(function(hwsnapshot){
						console.log(hwsnapshot.score);
						if(typeof hwsnapshot.score === "undefined"){
							$('<h3>'+hwsnapshot.name+'</h3><h4 class="container-fluid">Homework Score: <b>0</b></h4>').appendTo('#'+userkey);
						}
						else{
								$('<h3 class = "n">'+hwsnapshot.name+'</h3><h4 class="container-fluid">Homework Score: <b>'+hwsnapshot.score+'</b></h4>').appendTo('#'+userkey);
							hwsnapshot.questions.forEach(function(qnssnapshot){
								$('<div id="style"><h3 class="id">'+qnssnapshot.id+'</h3><h4 class="container-fluid">Status: '+qnssnapshot.status+'</h4><h4 class="container-fluid" >Student Answer: '+qnssnapshot.stuAns+'</h4></div>').appendTo('#'+userkey);
							})
							}
						})
						
			})
		}
      });
    </script>
  </body>
</html>
